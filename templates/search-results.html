{% extends 'base.html' %}

{% block title %}Ono Sweets{% endblock %}

{% block body %}

  <br>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-auto">

        <!-- <div id="results-as-json">
          <h2>Results as JSON</h2>
          <pre>{{ pformat(data) }}</pre>
        </div> -->


        <a href="/venue" class="btn btn-primary">
          Search
        </a>
        &nbsp &nbsp &nbsp &nbsp
        <a href="/" class="btn btn-primary">
          Home
        </a>
      </div>
      <br>
      <br>
      <br>
    </div>

    <div id="event-search-results">
      <h2>Search Results</h2>

      <p class="results">
        <span id="result-count">
          {{ data['total'] }}
        </span>
        results
      </p>

      <ul class="events-list list-group">
        {% for business in businesses %}
          <li class="list-group-item list-group-item-action">
            <div class="row">
              <div class="col-md-3">
                <a href="/venue/{{ business['id'] }}">
                  <img src="{{ business['image_url'] }}" style="width: 200px; height: 200px; object-fit: cover;">
                </a>
              </div>

              <div class="col-md-9">
                <div class="row">
                  <div class="col-md-6">
                    <a href="/venue/{{ business['id'] }}" target="_blank">
                      <h5>{{ business['name'] }}</h5>
                    </a>
                    <h6>phone: {{ '(' + business['phone'][2:5] + ') ' + business['phone'][5:8] + '-' + business['phone'][8:] }}</h6>
                  </div>

                  <div class="col-md-6">
                    <h6>rating: {{ business['rating'] }}</h6>
                    <h6>review count: {{ business['review_count'] }}</h6>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <h6>{{ business['location']['address1'] }}<br>{{ business['location']['city'] }}, {{ business['location']['state'] }} {{ business['location']['zip_code'] }}</h6>
                  </div>
                </div>
              </div>
            </div>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}